<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Nuna - Tienda de productos andinos sostenibles, textiles de alpaca y gadgets inteligentes">
    <meta name="theme-color" content="#8B4513">
    <title>Nuna - Tradición Andina Contemporánea</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@400;500;600;700&family=Jost:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Color Palette Andina */
            --tierra-oscura: #5D4037;
            --tierra-media: #8B4513;
            --oro-inca: #D4AF37;
            --oro-claro: #F4E4C1;
            --terracota: #C45C3E;
            --turquesa-andina: #45B5AA;
            --ocre: #CC7722;
            --negro-profundo: #1A1A1A;
            --gris-piedra: #8D8B87;
            --beige-natural: #F5F1E8;
            --blanco-alpaca: #FDFBF7;
            
            /* Spacing System */
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
            --spacing-2xl: 4rem;
            --spacing-3xl: 6rem;
            
            /* Typography */
            --font-display: 'Cormorant', serif;
            --font-body: 'Jost', sans-serif;
            
            /* Transitions */
            --transition-base: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.15s ease-in-out;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-base: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }
        
        body {
            font-family: var(--font-body);
            background-color: var(--blanco-alpaca);
            color: var(--negro-profundo);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Typography System */
        .font-display {
            font-family: var(--font-display);
            font-weight: 600;
            letter-spacing: -0.02em;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-display);
            line-height: 1.2;
            margin-bottom: var(--spacing-sm);
        }
        
        h1 { font-size: clamp(2.5rem, 5vw, 4.5rem); }
        h2 { font-size: clamp(2rem, 4vw, 3.5rem); }
        h3 { font-size: clamp(1.5rem, 3vw, 2.25rem); }
        h4 { font-size: clamp(1.25rem, 2.5vw, 1.75rem); }
        
        p {
            margin-bottom: var(--spacing-sm);
            max-width: 65ch;
        }
        
        /* Patrón Tocapu Andino Mejorado */
        .tocapu-pattern {
            background-color: var(--beige-natural);
            background-image: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 40px,
                    rgba(212, 175, 55, 0.025) 40px,
                    rgba(212, 175, 55, 0.025) 80px
                ),
                repeating-linear-gradient(
                    -45deg,
                    transparent,
                    transparent 40px,
                    rgba(139, 69, 19, 0.015) 40px,
                    rgba(139, 69, 19, 0.015) 80px
                ),
                radial-gradient(
                    circle at 20% 50%,
                    rgba(212, 175, 55, 0.03) 0%,
                    transparent 50%
                ),
                radial-gradient(
                    circle at 80% 50%,
                    rgba(196, 92, 62, 0.02) 0%,
                    transparent 50%
                );
        }
        
        /* Header Styles */
        .site-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(212, 175, 55, 0.15);
            transition: var(--transition-base);
            z-index: 1000;
        }
        
        .site-header.scrolled {
            box-shadow: var(--shadow-md);
            border-bottom-color: rgba(212, 175, 55, 0.25);
        }
        
        /* Logo Animation */
        .logo-symbol {
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .logo-container:hover .logo-symbol {
            transform: rotate(360deg) scale(1.05);
        }
        
        /* Navigation */
        .nav-link {
            position: relative;
            font-weight: 500;
            font-size: 0.9375rem;
            letter-spacing: 0.025em;
            color: var(--negro-profundo);
            transition: var(--transition-base);
            padding: var(--spacing-xs) var(--spacing-sm);
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--oro-inca), var(--terracota));
            transform: translateX(-50%);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover {
            color: var(--tierra-media);
        }
        
        .nav-link:hover::after {
            width: 80%;
        }
        
        /* Button System */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 1rem 2.5rem;
            font-family: var(--font-body);
            font-weight: 600;
            font-size: 0.9375rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            text-decoration: none;
            border: none;
            border-radius: 2px;
            cursor: pointer;
            transition: var(--transition-base);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--oro-inca) 0%, var(--ocre) 100%);
            color: white;
            box-shadow: 0 4px 20px rgba(212, 175, 55, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(212, 175, 55, 0.4);
        }
        
        .btn-primary:active {
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--tierra-media);
            border: 2px solid var(--oro-inca);
        }
        
        .btn-secondary:hover {
            background: var(--oro-inca);
            color: white;
        }
        
        /* Hero Section */
        .hero-section {
            position: relative;
            height: 85vh;
            min-height: 600px;
            max-height: 900px;
            overflow: hidden;
        }
        
        .hero-image-wrapper {
            position: absolute;
            inset: 0;
        }
        
        .hero-image-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
        
        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(
                180deg,
                rgba(26, 26, 26, 0.5) 0%,
                rgba(26, 26, 26, 0.3) 50%,
                rgba(26, 26, 26, 0.7) 100%
            );
        }
        
        .hero-content {
            position: relative;
            z-index: 10;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            padding: var(--spacing-lg);
        }
        
        /* Badge System */
        .badge {
            display: inline-block;
            padding: 0.375rem 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            border-radius: 2px;
        }
        
        .badge-primary {
            background: var(--terracota);
            color: white;
        }
        
        .badge-secondary {
            background: var(--turquesa-andina);
            color: white;
        }
        
        .badge-gold {
            background: var(--oro-inca);
            color: var(--negro-profundo);
        }
        
        /* Feature Cards */
        .feature-card {
            background: white;
            padding: var(--spacing-xl);
            border-left: 4px solid var(--oro-inca);
            box-shadow: var(--shadow-sm);
            transition: var(--transition-base);
            height: 100%;
        }
        
        .feature-card:hover {
            transform: translateX(8px);
            box-shadow: var(--shadow-md);
            border-left-color: var(--terracota);
        }
        
        .feature-icon {
            width: 64px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin-bottom: var(--spacing-md);
            transition: var(--transition-base);
        }
        
        .feature-card:hover .feature-icon {
            transform: scale(1.1) rotate(5deg);
        }
        
        /* Product Cards */
        .product-card {
            background: white;
            border-radius: 0;
            overflow: hidden;
            box-shadow: var(--shadow-base);
            transition: var(--transition-base);
            border: 1px solid rgba(212, 175, 55, 0.15);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--oro-inca);
        }
        
        .product-image-wrapper {
            position: relative;
            width: 100%;
            padding-top: 125%; /* 4:5 Aspect Ratio */
            overflow: hidden;
            background: var(--beige-natural);
        }
        
        .product-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .product-card:hover .product-image {
            transform: scale(1.1);
        }
        
        .product-badge {
            position: absolute;
            top: var(--spacing-sm);
            left: var(--spacing-sm);
            z-index: 10;
        }
        
        .product-content {
            padding: var(--spacing-lg);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-title {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-sm);
            color: var(--tierra-media);
        }
        
        .product-description {
            color: var(--gris-piedra);
            font-size: 0.9375rem;
            line-height: 1.7;
            margin-bottom: var(--spacing-md);
            flex-grow: 1;
        }
        
        .product-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: auto;
            padding-top: var(--spacing-md);
            border-top: 1px solid rgba(212, 175, 55, 0.15);
        }
        
        .product-price {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 700;
            color: var(--oro-inca);
        }
        
        .product-price-currency {
            font-size: 1.25rem;
            opacity: 0.8;
        }
        
        /* Section Divider */
        .section-divider {
            height: 3px;
            max-width: 200px;
            margin: var(--spacing-xl) auto;
            background: linear-gradient(
                90deg,
                transparent,
                var(--oro-inca),
                var(--terracota),
                var(--oro-inca),
                transparent
            );
        }
        
        /* Nuna Chat */
        .nuna-chat-wrapper {
            background: linear-gradient(135deg, var(--negro-profundo) 0%, #2a2a2a 100%);
            border-radius: 8px;
            padding: var(--spacing-2xl);
            box-shadow: var(--shadow-xl);
            border-left: 6px solid var(--oro-inca);
            position: relative;
            overflow: hidden;
        }
        
        .nuna-chat-wrapper::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(
                circle,
                rgba(212, 175, 55, 0.05) 0%,
                transparent 70%
            );
            animation: pulse 8s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-10%, -10%); }
        }
        
        .nuna-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--oro-inca), var(--ocre));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.3);
            flex-shrink: 0;
        }
        
        .nuna-message {
            font-size: 1.125rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.9);
            font-style: italic;
        }
        
        /* Cart Modal */
        .cart-modal-overlay {
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        
        .cart-modal-content {
            background: white;
            height: 100vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
        }
        
        .cart-item {
            display: flex;
            gap: var(--spacing-md);
            padding: var(--spacing-md);
            background: var(--beige-natural);
            border-radius: 4px;
            transition: var(--transition-fast);
        }
        
        .cart-item:hover {
            background: var(--oro-claro);
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 4px;
            flex-shrink: 0;
        }
        
        .cart-empty {
            text-align: center;
            padding: var(--spacing-3xl) var(--spacing-lg);
            color: var(--gris-piedra);
        }
        
        .cart-empty-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto var(--spacing-md);
            opacity: 0.3;
        }
        
        /* Notification Toast */
        .notification-toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: white;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: 4px;
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--turquesa-andina);
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 9999;
            max-width: 400px;
        }
        
        .notification-toast.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        /* Footer */
        .site-footer {
            background: linear-gradient(180deg, var(--negro-profundo) 0%, #0a0a0a 100%);
            color: rgba(255, 255, 255, 0.7);
        }
        
        .footer-link {
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            transition: var(--transition-fast);
            display: inline-block;
        }
        
        .footer-link:hover {
            color: var(--oro-inca);
            transform: translateX(4px);
        }
        
        /* Scroll Progress Bar */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--oro-inca), var(--terracota));
            z-index: 9999;
            transition: width 0.1s ease;
        }
        
        /* Loading State */
        .loading-spinner {
            border: 3px solid rgba(212, 175, 55, 0.2);
            border-top: 3px solid var(--oro-inca);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            :root {
                --spacing-xl: 2.5rem;
                --spacing-2xl: 3rem;
                --spacing-3xl: 4rem;
            }
        }
        
        @media (max-width: 768px) {
            :root {
                --spacing-xl: 2rem;
                --spacing-2xl: 2.5rem;
                --spacing-3xl: 3rem;
            }
            
            .hero-section {
                height: 70vh;
                min-height: 500px;
            }
            
            .product-image-wrapper {
                padding-top: 100%; /* 1:1 on mobile */
            }
            
            .feature-card {
                padding: var(--spacing-lg);
            }
            
            .notification-toast {
                left: 1rem;
                right: 1rem;
                bottom: 1rem;
            }
        }
        
        @media (max-width: 640px) {
            html {
                font-size: 15px;
            }
            
            .btn {
                padding: 0.875rem 2rem;
                font-size: 0.875rem;
            }
        }
        
        /* Utility Classes */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding-left: var(--spacing-md);
            padding-right: var(--spacing-md);
        }
        
        .section-spacing {
            padding-top: var(--spacing-3xl);
            padding-bottom: var(--spacing-3xl);
        }
        
        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        /* Focus States */
        *:focus-visible {
            outline: 2px solid var(--oro-inca);
            outline-offset: 2px;
        }
        
        button:focus-visible,
        a:focus-visible {
            outline-color: var(--turquesa-andina);
        }
    </style>
</head>
<body class="tocapu-pattern">
    
    <!-- Scroll Progress Bar -->
    <div class="scroll-progress" id="scroll-progress" style="width: 0%;"></div>
    
    <!-- Site Header -->
    <header class="site-header fixed w-full top-0" role="banner">
        <div class="container">
            <nav class="flex items-center justify-between h-24" role="navigation" aria-label="Main navigation">
                <!-- Logo -->
                <a href="#hero" class="logo-container flex items-center space-x-3" aria-label="Nuna Home">
                    <div class="w-14 h-14 bg-gradient-to-br from-amber-800 to-amber-950 flex items-center justify-center logo-symbol">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="white" opacity="0.95"/>
                            <path d="M2 17L12 22L22 17" stroke="white" stroke-width="2.5" opacity="0.75"/>
                            <path d="M2 12L12 17L22 12" stroke="white" stroke-width="2.5" opacity="0.85"/>
                        </svg>
                    </div>
                    <span class="font-display text-3xl font-bold tracking-wide" style="color: var(--tierra-media);">NUNA</span>
                </a>
                
                <!-- Desktop Navigation -->
                <div class="hidden lg:flex items-center space-x-2">
                    <a href="#catalog" class="nav-link">Catálogo</a>
                    <a href="#about" class="nav-link">Nuestra Historia</a>
                    <a href="#sustainability" class="nav-link">Sostenibilidad</a>
                    <a href="#contact" class="nav-link">Contacto</a>
                    <button 
                        onclick="CartManager.toggle()" 
                        class="relative p-3 ml-4 hover:bg-gray-100 rounded-full transition"
                        aria-label="Shopping cart"
                        aria-expanded="false">
                        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <circle cx="9" cy="21" r="1"/>
                            <circle cx="20" cy="21" r="1"/>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                        </svg>
                        <span id="cart-count-badge" class="hidden absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-br from-red-500 to-red-600 text-white text-xs font-bold rounded-full flex items-center justify-center">0</span>
                    </button>
                </div>
                
                <!-- Mobile Menu Button -->
                <button 
                    class="lg:hidden p-2 hover:bg-gray-100 rounded-lg transition" 
                    onclick="MobileMenu.toggle()"
                    aria-label="Toggle mobile menu"
                    aria-expanded="false"
                    id="mobile-menu-button">
                    <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12h18M3 6h18M3 18h18"/>
                    </svg>
                </button>
            </nav>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden lg:hidden bg-white border-t border-gray-200">
            <div class="container py-6 space-y-4">
                <a href="#catalog" class="block py-2 font-medium text-lg hover:text-amber-700 transition" onclick="MobileMenu.close()">Catálogo</a>
                <a href="#about" class="block py-2 font-medium text-lg hover:text-amber-700 transition" onclick="MobileMenu.close()">Nuestra Historia</a>
                <a href="#sustainability" class="block py-2 font-medium text-lg hover:text-amber-700 transition" onclick="MobileMenu.close()">Sostenibilidad</a>
                <a href="#contact" class="block py-2 font-medium text-lg hover:text-amber-700 transition" onclick="MobileMenu.close()">Contacto</a>
                <button onclick="CartManager.toggle(); MobileMenu.close();" class="w-full btn btn-secondary mt-4">
                    Ver Carrito (<span id="mobile-cart-count">0</span>)
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="hero" class="hero-section" role="banner">
        <div class="hero-image-wrapper">
            <img 
                src="https://images.unsplash.com/photo-1609137144813-7d9921338f24?w=2000&q=90" 
                alt="Textiles andinos tradicionales con diseños geométricos"
                loading="eager">
        </div>
        <div class="hero-overlay"></div>
        <div class="hero-content container">
            <span class="badge badge-primary mb-6 animate-fade-in">Tradición Viva desde 1532</span>
            <h1 class="font-display font-bold mb-6 animate-fade-in" style="animation-delay: 0.1s;">
                Bienvenido a Nuna
            </h1>
            <p class="text-xl md:text-2xl mb-8 font-light max-w-3xl mx-auto animate-fade-in" style="animation-delay: 0.2s;">
                Donde la herencia textil andina encuentra la excelencia contemporánea. 
                Cada producto es una celebración de nuestra identidad cultural y compromiso con la sostenibilidad.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 animate-fade-in" style="animation-delay: 0.3s;">
                <button onclick="Utils.scrollToSection('catalog')" class="btn btn-primary">
                    Explorar Colección
                </button>
                <button onclick="Utils.scrollToSection('about')" class="btn btn-secondary">
                    Nuestra Historia
                </button>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="section-spacing bg-white">
        <div class="container">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Feature 1 -->
                <article class="feature-card">
                    <div class="feature-icon" style="background: rgba(212, 175, 55, 0.12);">
                        <svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--oro-inca);">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                            <path d="M16 11h6m-3-3v6"/>
                        </svg>
                    </div>
                    <h3 class="font-display text-2xl font-semibold mb-3" style="color: var(--tierra-media);">
                        Fibras Naturales Premium
                    </h3>
                    <p class="text-gray-600 leading-relaxed">
                        Trabajamos exclusivamente con fibra de alpaca baby (18-22 micrones) y algodón Pima orgánico certificado, 
                        tejidos con técnicas ancestrales transmitidas por generaciones de maestros artesanos.
                    </p>
                </article>
                
                <!-- Feature 2 -->
                <article class="feature-card">
                    <div class="feature-icon" style="background: rgba(196, 92, 62, 0.12);">
                        <svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--terracota);">
                            <rect x="2" y="7" width="20" height="14" rx="2"/>
                            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                        </svg>
                    </div>
                    <h3 class="font-display text-2xl font-semibold mb-3" style="color: var(--tierra-media);">
                        Tecnología Responsable
                    </h3>
                    <p class="text-gray-600 leading-relaxed">
                        Seleccionamos cuidadosamente gadgets duraderos y reparables de marcas comprometidas 
                        con la ética laboral y el medio ambiente. Cada producto incluye garantía extendida y soporte técnico.
                    </p>
                </article>
                
                <!-- Feature 3 -->
                <article class="feature-card">
                    <div class="feature-icon" style="background: rgba(69, 181, 170, 0.12);">
                        <svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--turquesa-andina);">
                            <path d="M12 2v6.5"/>
                            <path d="M12 22v-6.5"/>
                            <path d="M12 8.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 1 0 0-7z"/>
                            <path d="M19 15.5l-5.5-3.2"/>
                            <path d="M5 8.5l5.5 3.2"/>
                        </svg>
                    </div>
                    <h3 class="font-display text-2xl font-semibold mb-3" style="color: var(--tierra-media);">
                        Gastronomía Andina
                    </h3>
                    <p class="text-gray-600 leading-relaxed">
                        Productos gourmet de comercio justo que celebran la biodiversidad andina: 
                        café de altura, chocolate de cacao nativo, quinua real y otros superalimentos ancestrales.
                    </p>
                </article>
            </div>
        </div>
    </section>

    <div class="section-divider"></div>

    <!-- Product Catalog -->
    <section id="catalog" class="section-spacing">
        <div class="container">
            <div class="text-center mb-16">
                <h2 class="font-display font-bold mb-4" style="color: var(--tierra-media);">
                    Colección Seleccionada
                </h2>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                    Cada pieza en nuestra colección cuenta una historia de tradición, sostenibilidad y excelencia artesanal. 
                    Descubre productos únicos que conectan pasado y presente.
                </p>
            </div>
            
            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                <!-- Products will be injected here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- About/Nuna Chat Section -->
    <section id="about" class="section-spacing bg-gradient-to-b from-white to-gray-50">
        <div class="container max-w-5xl">
            <div class="nuna-chat-wrapper">
                <div class="flex flex-col md:flex-row items-start gap-8 relative z-10">
                    <div class="nuna-avatar">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="white" opacity="0.95"/>
                            <path d="M2 17L12 22L22 17" stroke="white" stroke-width="2.5" opacity="0.75"/>
                            <path d="M2 12L12 17L22 12" stroke="white" stroke-width="2.5" opacity="0.85"/>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <h3 class="font-display text-2xl font-semibold mb-4" style="color: var(--oro-inca);">
                            Mensaje de Nuna
                        </h3>
                        <div class="nuna-message">
                            <p class="mb-4">
                                "Hola, soy Nuna, tu guía en este espacio donde cada hilo cuenta una historia milenaria. 
                                Mi nombre significa 'alma' en quechua, y mi misión es ayudarte a encontrar esa pieza especial 
                                que conecta tu presente con nuestra profunda herencia andina."
                            </p>
                            <p class="mb-4">
                                "Cada producto que ves fue seleccionado con dedicación, pensando en la calidad excepcional, 
                                la sostenibilidad genuina y el respeto profundo por nuestras tradiciones textiles que han 
                                sobrevivido más de 5,000 años."
                            </p>
                            <p>
                                "Cuando eliges un producto Nuna, no solo adquieres un objeto - te conviertes en parte de 
                                una cadena de valor que dignifica el trabajo artesanal, preserva técnicas ancestrales y 
                                construye un futuro más sostenible para las comunidades andinas."
                            </p>
                        </div>
                        <div id="cart-notification-area" class="mt-6">
                            <!-- Dynamic notifications will appear here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sustainability Section -->
    <section id="sustainability" class="section-spacing bg-white">
        <div class="container max-w-6xl">
            <div class="text-center mb-16">
                <h2 class="font-display font-bold mb-4" style="color: var(--tierra-media);">
                    Nuestro Compromiso
                </h2>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                    La sostenibilidad no es una tendencia para nosotros, es nuestra forma de vida ancestral.
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                <div class="space-y-6">
                    <h3 class="font-display text-2xl font-semibold" style="color: var(--tierra-media);">
                        Comercio Justo Certificado
                    </h3>
                    <p class="text-gray-600 leading-relaxed">
                        Trabajamos directamente con 47 comunidades artesanales en Cusco, Puno y Ayacucho, 
                        garantizando precios justos que superan en un 40% el mercado convencional. 
                        Cada compra contribuye a programas de educación y salud comunitaria.
                    </p>
                </div>
                
                <div class="space-y-6">
                    <h3 class="font-display text-2xl font-semibold" style="color: var(--tierra-media);">
                        Huella de Carbono Negativa
                    </h3>
                    <p class="text-gray-600 leading-relaxed">
                        Nuestros procesos de producción capturan más CO₂ del que emiten. 
                        Las alpacas pastan en sistemas de rotación que regeneran los suelos andinos, 
                        y cada envío compensa 200% de sus emisiones mediante proyectos de reforestación.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="site-footer" role="contentinfo">
        <div class="container section-spacing">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12">
                <!-- Brand Column -->
                <div>
                    <div class="flex items-center space-x-3 mb-6">
                        <div class="w-12 h-12 bg-gradient-to-br from-amber-700 to-amber-900 flex items-center justify-center">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="white" opacity="0.95"/>
                            </svg>
                        </div>
                        <span class="font-display text-2xl font-bold text-white">NUNA</span>
                    </div>
                    <p class="text-sm leading-relaxed mb-4">
                        Conectando la tradición textil andina con el mundo moderno a través de productos 
                        sostenibles, éticos y de calidad excepcional.
                    </p>
                    <p class="text-xs opacity-60">
                        Certificado B Corp · Comercio Justo · Carbono Negativo
                    </p>
                </div>
                
                <!-- Links Column -->
                <div>
                    <h4 class="font-semibold text-white mb-4 text-lg">Navegación</h4>
                    <nav class="space-y-3" aria-label="Footer navigation">
                        <a href="#catalog" class="footer-link block">Catálogo Completo</a>
                        <a href="#about" class="footer-link block">Nuestra Historia</a>
                        <a href="#sustainability" class="footer-link block">Sostenibilidad</a>
                        <a href="#" class="footer-link block">Blog & Noticias</a>
                        <a href="#" class="footer-link block">Preguntas Frecuentes</a>
                    </nav>
                </div>
                
                <!-- Customer Service Column -->
                <div>
                    <h4 class="font-semibold text-white mb-4 text-lg">Atención al Cliente</h4>
                    <nav class="space-y-3" aria-label="Customer service links">
                        <a href="#" class="footer-link block">Política de Envíos</a>
                        <a href="#" class="footer-link block">Devoluciones y Cambios</a>
                        <a href="#" class="footer-link block">Guía de Tallas</a>
                        <a href="#" class="footer-link block">Cuidado de Productos</a>
                        <a href="#" class="footer-link block">Garantía y Reparaciones</a>
                    </nav>
                </div>
                
                <!-- Contact Column -->
                <div id="contact">
                    <h4 class="font-semibold text-white mb-4 text-lg">Contacto</h4>
                    <address class="not-italic space-y-3 text-sm">
                        <div>
                            <p class="opacity-60 mb-1">Email:</p>
                            <a href="mailto:hola@nuna.pe" class="footer-link">hola@nuna.pe</a>
                        </div>
                        <div>
                            <p class="opacity-60 mb-1">WhatsApp:</p>
                            <a href="tel:+51999888777" class="footer-link">+51 999 888 777</a>
                        </div>
                        <div>
                            <p class="opacity-60 mb-1">Dirección:</p>
                            <p>Av. El Sol 456<br>Cusco, San Sebastián<br>Perú</p>
                        </div>
                        <div class="pt-4">
                            <p class="opacity-60 mb-2">Horario de atención:</p>
                            <p class="text-sm">Lun - Vie: 9:00 - 18:00<br>Sáb: 10:00 - 14:00</p>
                        </div>
                    </address>
                </div>
            </div>
            
            <!-- Bottom Bar -->
            <div class="border-t border-gray-800 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                    <p class="text-sm opacity-60 text-center md:text-left">
                        &copy; 2026 Nuna. Desarrollado pro el grupo 7.
                    </p>
                    <div class="flex gap-6">
                        <a href="#" class="footer-link text-sm">Términos y Condiciones</a>
                        <a href="#" class="footer-link text-sm">Política de Privacidad</a>
                        <a href="#" class="footer-link text-sm">Cookies</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Cart Modal -->
    <div id="cart-modal" class="fixed inset-0 z-[9999] hidden" role="dialog" aria-modal="true" aria-labelledby="cart-title">
        <div class="cart-modal-overlay absolute inset-0" onclick="CartManager.close()" aria-hidden="true"></div>
        <div class="cart-modal-content absolute right-0 top-0 h-full w-full max-w-lg">
            <div class="h-full flex flex-col">
                <!-- Cart Header -->
                <div class="flex items-center justify-between p-6 border-b border-gray-200">
                    <h2 id="cart-title" class="font-display text-3xl font-bold" style="color: var(--tierra-media);">
                        Tu Carrito
                    </h2>
                    <button 
                        onclick="CartManager.close()" 
                        class="p-2 hover:bg-gray-100 rounded-full transition"
                        aria-label="Close cart">
                        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                
                <!-- Cart Items -->
                <div id="cart-items-container" class="flex-1 overflow-y-auto p-6">
                    <!-- Items will be injected here -->
                </div>
                
                <!-- Cart Footer -->
                <div id="cart-footer" class="hidden border-t border-gray-200 p-6 bg-gray-50">
                    <div class="space-y-4 mb-6">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Subtotal</span>
                            <span id="cart-subtotal" class="font-medium">S/ 0</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Envío</span>
                            <span class="text-green-600 font-medium">GRATIS</span>
                        </div>
                        <div class="border-t pt-4 flex justify-between items-center">
                            <span class="font-display text-xl font-semibold">Total</span>
                            <span id="cart-total" class="font-display text-3xl font-bold" style="color: var(--oro-inca);">S/ 0</span>
                        </div>
                    </div>
                    <button class="btn btn-primary w-full mb-3" onclick="CartManager.checkout()">
                        Finalizar Compra
                    </button>
                    <button class="btn btn-secondary w-full" onclick="CartManager.close()">
                        Seguir Comprando
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification-toast" class="notification-toast" role="alert" aria-live="polite">
        <div class="flex items-center gap-3">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" class="flex-shrink-0">
                <path d="M20 6L9 17l-5-5"/>
            </svg>
            <div>
                <p id="notification-message" class="font-medium"></p>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ===========================
        // CONFIGURATION & DATA
        // ===========================
        
        const CONFIG = {
            currency: 'S/',
            freeShippingThreshold: 0,
            animationDuration: 400,
            toastDuration: 3500,
        };
        
        const PRODUCTS = [
            {
                id: 'chaleco-alpaca',
                name: 'Chaleco de Alpaca Premium',
                description: 'Chaleco tejido a mano con fibra de alpaca baby (18-22 micrones). Suave como la seda, abrigador como ninguno, elegante para cualquier ocasión. Certificado de origen y trazabilidad completa.',
                price: 380,
                image: 'https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=800&q=85',
                badge: 'Alpaca Baby',
                badgeClass: 'badge-gold'
            },
            {
                id: 'manta-andina',
                name: 'Manta Ceremonial Tocapu',
                description: 'Manta tradicional con diseños Tocapu ancestrales, cada símbolo cuenta una historia. Perfecta para decoración de interiores o como pieza de abrigo ceremonial. Diseño registrado.',
                price: 420,
                image: 'https://images.unsplash.com/photo-1595526114035-0d45ed16cfbf?w=800&q=85',
                badge: 'Textil Ancestral',
                badgeClass: 'badge-primary'
            },
            {
                id: 'audifonos-premium',
                name: 'Audífonos Inalámbricos Pro',
                description: 'Alta fidelidad con cancelación de ruido activa. Batería de 40 horas, construcción en aluminio reciclado. Garantía de 3 años y soporte técnico especializado.',
                price: 580,
                image: 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800&q=85',
                badge: 'Tech Sostenible',
                badgeClass: 'badge-secondary'
            },
            {
                id: 'cafe-altura',
                name: 'Café Orgánico de Altura',
                description: 'Café 100% arábica cultivado a más de 1,800 msnm en Chanchamayo. Notas de chocolate oscuro y frutos rojos. Comercio justo certificado, tostado artesanal en pequeños lotes.',
                price: 75,
                image: 'https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=800&q=85',
                badge: 'Gourmet',
                badgeClass: 'badge-primary'
            },
            {
                id: 'poncho-tradicional',
                name: 'Poncho Tradicional Premium',
                description: 'Poncho artesanal con diseños geométricos tradicionales de Cusco. Tejido en telar de cintura, técnica de más de 3,000 años. Pieza única, no hay dos iguales.',
                price: 650,
                image: 'https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=800&q=85',
                badge: 'Pieza Única',
                badgeClass: 'badge-gold'
            },
            {
                id: 'chocolate-organico',
                name: 'Chocolate Artesanal 75%',
                description: 'Chocolate de origen único de cacao chuncho nativo del Cusco. 75% cacao puro, sin lecitina ni aditivos. Premiado internacionalmente, producción limitada.',
                price: 55,
                image: 'https://images.unsplash.com/photo-1511381939415-e44015466834?w=800&q=85',
                badge: 'Cacao Nativo',
                badgeClass: 'badge-primary'
            },
            {
                id: 'bufanda-alpaca',
                name: 'Bufanda de Alpaca Multicolor',
                description: 'Bufanda tejida con la técnica de "pallay" (diseño en el tejido). Colores naturales de alpaca: blanco, beige, marrón y negro. Extraordinariamente suave y liviana.',
                price: 180,
                image: 'https://images.unsplash.com/photo-1520903920243-00d872a2d1c9?w=800&q=85',
                badge: 'Colores Naturales',
                badgeClass: 'badge-gold'
            },
            {
                id: 'quinua-real',
                name: 'Quinua Real Orgánica',
                description: 'Quinua real del altiplano boliviano-peruano. Grano grande, proteína completa, certificación orgánica. Comercio directo con comunidades productoras.',
                price: 45,
                image: 'https://images.unsplash.com/photo-1586201375761-83865001e31c?w=800&q=85',
                badge: 'Superalimento',
                badgeClass: 'badge-secondary'
            }
        ];
        
        // ===========================
        // STATE MANAGEMENT
        // ===========================
        
        const State = {
            cart: [],
            
            addToCart(product) {
                const existingItem = this.cart.find(item => item.id === product.id);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    this.cart.push({
                        ...product,
                        quantity: 1
                    });
                }
                
                this.saveCart();
                return existingItem ? existingItem : this.cart[this.cart.length - 1];
            },
            
            removeFromCart(productId) {
                const index = this.cart.findIndex(item => item.id === productId);
                if (index > -1) {
                    const removed = this.cart.splice(index, 1)[0];
                    this.saveCart();
                    return removed;
                }
                return null;
            },
            
            updateQuantity(productId, quantity) {
                const item = this.cart.find(item => item.id === productId);
                if (item) {
                    if (quantity <= 0) {
                        return this.removeFromCart(productId);
                    }
                    item.quantity = quantity;
                    this.saveCart();
                    return item;
                }
                return null;
            },
            
            getTotal() {
                return this.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            },
            
            getItemCount() {
                return this.cart.reduce((sum, item) => sum + item.quantity, 0);
            },
            
            clearCart() {
                this.cart = [];
                this.saveCart();
            },
            
            saveCart() {
                try {
                    localStorage.setItem('nuna_cart', JSON.stringify(this.cart));
                } catch (error) {
                    console.error('Error saving cart:', error);
                }
            },
            
            loadCart() {
                try {
                    const saved = localStorage.getItem('nuna_cart');
                    if (saved) {
                        this.cart = JSON.parse(saved);
                    }
                } catch (error) {
                    console.error('Error loading cart:', error);
                    this.cart = [];
                }
            }
        };
        
        // ===========================
        // UTILITIES
        // ===========================
        
        const Utils = {
            formatPrice(price) {
                return `${CONFIG.currency} ${price.toFixed(0)}`;
            },
            
            scrollToSection(sectionId) {
                const element = document.getElementById(sectionId);
                if (element) {
                    const headerHeight = 96; // Height of fixed header
                    const elementPosition = element.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerHeight;
                    
                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }
            },
            
            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            },
            
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        };
        
        // ===========================
        // UI COMPONENTS
        // ===========================
        
        const ProductCard = {
            render(product) {
                return `
                    <article class="product-card">
                        <div class="product-image-wrapper">
                            <img 
                                src="${Utils.escapeHtml(product.image)}" 
                                alt="${Utils.escapeHtml(product.name)}"
                                class="product-image"
                                loading="lazy">
                            <div class="product-badge">
                                <span class="badge ${product.badgeClass}">${Utils.escapeHtml(product.badge)}</span>
                            </div>
                        </div>
                        <div class="product-content">
                            <h3 class="product-title font-display">${Utils.escapeHtml(product.name)}</h3>
                            <p class="product-description">${Utils.escapeHtml(product.description)}</p>
                            <div class="product-footer">
                                <div>
                                    <span class="product-price">
                                        <span class="product-price-currency">${CONFIG.currency}</span>
                                        ${product.price}
                                    </span>
                                </div>
                                <button 
                                    data-add-to-cart="${product.id}"
                                    class="btn btn-primary"
                                    style="padding: 0.75rem 1.5rem; font-size: 0.875rem;">
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </article>
                `;
            },
            
            addToCart(productId) {
                const product = PRODUCTS.find(p => p.id === productId);
                if (!product) {
                    console.error('Product not found:', productId);
                    return;
                }
                
                State.addToCart(product);
                CartManager.update();
                Notifications.show(`${product.name} agregado al carrito`);
            }
        };
        
        const CartManager = {
            toggle() {
                const modal = document.getElementById('cart-modal');
                const isHidden = modal.classList.contains('hidden');
                
                if (isHidden) {
                    this.open();
                } else {
                    this.close();
                }
            },
            
            open() {
                const modal = document.getElementById('cart-modal');
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                this.render();
            },
            
            close() {
                const modal = document.getElementById('cart-modal');
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            },
            
            update() {
                this.updateBadges();
                if (!document.getElementById('cart-modal').classList.contains('hidden')) {
                    this.render();
                }
            },
            
            updateBadges() {
                const count = State.getItemCount();
                const badges = [
                    document.getElementById('cart-count-badge'),
                    document.getElementById('mobile-cart-count')
                ];
                
                badges.forEach(badge => {
                    if (badge) {
                        badge.textContent = count;
                        if (count > 0) {
                            badge.classList.remove('hidden');
                        } else {
                            badge.classList.add('hidden');
                        }
                    }
                });
            },
            
            render() {
                const container = document.getElementById('cart-items-container');
                const footer = document.getElementById('cart-footer');
                
                if (State.cart.length === 0) {
                    container.innerHTML = `
                        <div class="cart-empty">
                            <div class="cart-empty-icon">
                                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                    <circle cx="9" cy="21" r="1"/>
                                    <circle cx="20" cy="21" r="1"/>
                                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                                </svg>
                            </div>
                            <h3 class="font-display text-2xl font-semibold mb-2">Tu carrito está vacío</h3>
                            <p class="text-gray-600 mb-6">Explora nuestra colección y encuentra algo especial</p>
                            <button onclick="CartManager.close(); Utils.scrollToSection('catalog')" class="btn btn-primary">
                                Ver Productos
                            </button>
                        </div>
                    `;
                    footer.classList.add('hidden');
                    return;
                }
                
                container.innerHTML = `
                    <div class="space-y-4">
                        ${State.cart.map(item => `
                            <div class="cart-item">
                                <img 
                                    src="${Utils.escapeHtml(item.image)}" 
                                    alt="${Utils.escapeHtml(item.name)}"
                                    class="cart-item-image">
                                <div class="flex-1 min-w-0">
                                    <h4 class="font-semibold mb-1 truncate">${Utils.escapeHtml(item.name)}</h4>
                                    <p class="text-sm mb-2" style="color: var(--oro-inca);">
                                        ${Utils.formatPrice(item.price)}
                                    </p>
                                    <div class="flex items-center gap-2">
                                        <button 
                                            onclick="CartManager.changeQuantity('${item.id}', ${item.quantity - 1})"
                                            class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-100 transition"
                                            aria-label="Decrease quantity">
                                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M5 12h14"/>
                                            </svg>
                                        </button>
                                        <span class="w-12 text-center font-medium">${item.quantity}</span>
                                        <button 
                                            onclick="CartManager.changeQuantity('${item.id}', ${item.quantity + 1})"
                                            class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-100 transition"
                                            aria-label="Increase quantity">
                                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M12 5v14M5 12h14"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <button 
                                    onclick="CartManager.removeItem('${item.id}')"
                                    class="p-2 text-red-500 hover:bg-red-50 rounded-full transition self-start"
                                    aria-label="Remove item">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M18 6L6 18M6 6l12 12"/>
                                    </svg>
                                </button>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                const total = State.getTotal();
                document.getElementById('cart-subtotal').textContent = Utils.formatPrice(total);
                document.getElementById('cart-total').textContent = Utils.formatPrice(total);
                
                footer.classList.remove('hidden');
            },
            
            changeQuantity(productId, newQuantity) {
                State.updateQuantity(productId, newQuantity);
                this.update();
            },
            
            removeItem(productId) {
                const removed = State.removeFromCart(productId);
                if (removed) {
                    Notifications.show(`${removed.name} eliminado del carrito`);
                }
                this.update();
            },
            
            checkout() {
                if (State.cart.length === 0) {
                    Notifications.show('Tu carrito está vacío');
                    return;
                }
                
                const total = State.getTotal();
                const itemCount = State.getItemCount();
                
                alert(`¡Gracias por tu compra!\n\nTotal: ${Utils.formatPrice(total)}\nProductos: ${itemCount}\n\nEn una implementación real, aquí se procesaría el pago.`);
                
                State.clearCart();
                this.update();
                this.close();
            }
        };
        
        const Notifications = {
            show(message) {
                const toast = document.getElementById('notification-toast');
                const messageEl = document.getElementById('notification-message');
                
                messageEl.textContent = message;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, CONFIG.toastDuration);
            }
        };
        
        const MobileMenu = {
            toggle() {
                const menu = document.getElementById('mobile-menu');
                const button = document.getElementById('mobile-menu-button');
                const isHidden = menu.classList.contains('hidden');
                
                menu.classList.toggle('hidden');
                button.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
            },
            
            close() {
                const menu = document.getElementById('mobile-menu');
                const button = document.getElementById('mobile-menu-button');
                
                menu.classList.add('hidden');
                button.setAttribute('aria-expanded', 'false');
            }
        };
        
        // ===========================
        // INITIALIZATION
        // ===========================
        
        function initializeApp() {
            // Load cart from localStorage
            State.loadCart();
            
            // Render products
            const productGrid = document.getElementById('product-grid');
            if (productGrid) {
                productGrid.innerHTML = PRODUCTS.map(product => ProductCard.render(product)).join('');
                // Delegated click handler for add-to-cart buttons
                productGrid.addEventListener('click', (e) => {
                    const btn = e.target.closest('[data-add-to-cart]');
                    if (!btn) return;
                    const id = btn.getAttribute('data-add-to-cart');
                    if (id) {
                        ProductCard.addToCart(id);
                    }
                });
            }
            
            // Update cart badges
            CartManager.updateBadges();
            
            // Scroll progress indicator
            window.addEventListener('scroll', Utils.debounce(() => {
                const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = (winScroll / height) * 100;
                document.getElementById('scroll-progress').style.width = scrolled + '%';
            }, 10));
            
            // Header scroll effect
            let lastScroll = 0;
            window.addEventListener('scroll', () => {
                const header = document.querySelector('.site-header');
                const currentScroll = window.pageYOffset;
                
                if (currentScroll > 100) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
                
                lastScroll = currentScroll;
            });
            
            // Smooth scroll for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href !== '#' && href.length > 1) {
                        e.preventDefault();
                        const targetId = href.substring(1);
                        Utils.scrollToSection(targetId);
                    }
                });
            });
            
            // Keyboard navigation for cart
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const cartModal = document.getElementById('cart-modal');
                    if (!cartModal.classList.contains('hidden')) {
                        CartManager.close();
                    }
                    const mobileMenu = document.getElementById('mobile-menu');
                    if (!mobileMenu.classList.contains('hidden')) {
                        MobileMenu.close();
                    }
                }
            });
            
            console.log('✓ Nuna Store initialized successfully');
        }
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
</body>
</html>